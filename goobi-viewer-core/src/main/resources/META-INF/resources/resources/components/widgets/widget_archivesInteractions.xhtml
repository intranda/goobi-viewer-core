<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf">

	<composite:interface />

	<composite:implementation>
		<!-- (ADMIN) WIDGET FOR ARCHIVE INTERACTIONS -->
		<h:panelGroup rendered="#{userBean.loggedIn and userBean.admin}">
			<div id="widgetArchivesInteractions"
				class="widget widget-archives-interactions">
				<h:form id="widgetArchivesInteractionsStandardForm"
					prependId="false">
					<h2>#{msg.menuUser_workInteractions}</h2>
					<!-- 					<h3>#{msg.archives__current_collection}</h3> -->
					<ul>
						<!-- RE-INDEX ARCHIVE -->
						<h:panelGroup rendered="#{userBean.admin}">
							<li><h:commandLink
									action="#{archiveBean.reIndexArchiveAction}">
	                                   #{msg.archives__widget__action_reindex_archive}
	                               </h:commandLink></li>
						</h:panelGroup>
						<!--                     <h:panelGroup -->
						<!--                         rendered="#{userBean.user.maySetRepresentativeImage and activeDocumentBean.viewManager.hasPages and activeDocumentBean.viewManager.topStructElement.sourceDocFormat == 'METS'}"> -->
						<!--                         <li> -->
						<!--                             <h:commandLink -->
						<!--                                 action="#{adminBean.setRepresantativeImageAction(activeDocumentBean.viewManager.pi, activeDocumentBean.topDocument.dataRepository, activeDocumentBean.viewManager.currentPage.fileIdRoot)}"> -->
						<!--                                     #{msg.setRepresentativeImage} -->
						<!--                                 </h:commandLink> -->
						<!--                         </li> -->
						<!--                     </h:panelGroup> -->


						<!-- 						<h3>#{msg.archives__widget__single_unit}</h3> -->
						<!-- 						<ul> -->
						<!-- DO STUFF HERE -->
						<!-- 							<h:panelGroup rendered="#{userBean.user.cmsAdmin}"> -->
						<!-- 								<li><a -->
						<!-- 									href="#{cmsPageEditBean.createAndOpenNewPage(msg.overviewPage, archiveBean.currentArchive.resourceId)}">#{msg.action__create_linked_cms_page__label}</a> -->
						<!-- 								</li> -->
						<!-- 							</h:panelGroup> -->
						<!-- ADD RECORD NOTES -->
						<!--                         <h:panelGroup  rendered="#{userBean.admin}"> -->
						<!--                             <li> -->
						<!--                             	<a href="#{request.contextPath}/admin/cms/recordnotes/new/?pi=#{archiveBean.currentArchive.resourceId}"> #{msg.cms__record_notes__add_note}</a> -->
						<!--                             </li> -->
						<!--                         </h:panelGroup> -->


						<!-- 						</ul> -->

						<!-- DOWNLOAD EAD FILE -->
						<h:panelGroup rendered="#{userBean.user.cmsAdmin}">
							<li>
		                        <ui:fragment visibility-class="widget-element">
		                            <a 
		                                href="#{archiveBean.eadResolverUrl}"
		                                id="lidomets" 
		                                class="badge badge-dark widget-format-links__work-download-lido-mets" 
		                                title="#{msg.metadata_dl_mets}"
		                                data-toggle="tooltip"
		                                data-placement="top"
		                                data-trigger="hover"
		                                target="_blank" rel="nofollow noopener"
		                                aria-label="#{msg[activeDocumentBean.viewManager.topStructElement.docStructType]}: #{msg.downloadMetsButtonLabel}"> 
		                                #{msg.archives__widget__action_download_archive}
		                            </a>
		                        </ui:fragment>
							</li>
						</h:panelGroup>

						<!-- DELETE ARCHIVE -->
						<h:panelGroup rendered="#{userBean.admin}">
							<li>

								<button class="widget-archives-interactions__delete-button"
									data-require-confirmation="true"
									data-confirmation-text="#{navigationHelper.getTranslationWithParamsUnescaped(msg.archives__widget__action_delete_confirmation)}"
									jsf:action="#{archiveBean.deleteArchiveAction}"
									aria-label="#{msg.delete}: #{ticket.id}">
									#{msg.archives__widget__action_delete_archive}</button> <!-- 										<h:commandLink role="button" -->
								<!-- 													onclick="if ( !confirm( &quot;#{msg.deleteRecord_confirmationText}&quot; ) ) { return false };" -->
								<!-- 													action="#{archiveBean.deleteArchiveAction}"> -->
								<!--                                             #{msg.archives__widget__action_delete_archive} -->
								<!--                                         </h:commandLink> -->


							</li>
						</h:panelGroup>

					</ul>
				</h:form>
			</div>
		</h:panelGroup>
	</composite:implementation>
</ui:composition>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:adminComponent="http://xmlns.jcp.org/jsf/composite/admin/components">

	<composite:interface />

	<composite:implementation>
		<h:form id="rolesForm" rendered="#{userBean.admin}" prependId="false">
			<h:panelGroup id="listUserGroupRoles" rendered="#{adminBean.currentLicense == null}">
				<h3>#{msg.roles}</h3>
				
				<p>
					<h:commandLink value="#{msg.license_addNew}" action="#{adminBean.resetCurrentLicenseForUserGroupAction}" styleClass="btn btn--default">
						<f:ajax render="@form" />
					</h:commandLink>				
				</p>

                <adminComponent:licensesTable id="adminRolesTable" licenses="#{adminBean.currentUserGroup.getLicenses(true)}" />
				
			</h:panelGroup>

			<h:panelGroup id="editCoreLicense" rendered="#{adminBean.currentLicense != null}">
				<fieldset>
                    <ui:include src="/resources/admin/includes/currentRoleLicense.xhtml" />
                    <!-- CMS privileges -->
                    <ui:fragment rendered="#{adminBean.currentLicense.licenseType.cmsType}">
                        <ui:include src="/resources/admin/includes/currentRolePrivilegesCMS.xhtml" />
                    </ui:fragment>
                    <!-- Crowdsourcing privileges -->
                    <ui:fragment rendered="#{adminBean.currentLicense.licenseType.crowdsourcingType}">
                        <ui:include src="/resources/admin/includes/currentRolePrivilegesCrowdsourcing.xhtml" />
                    </ui:fragment>
				</fieldset>
				<br />
				<div style="text-align: right;">
					<h:commandLink id="cancelButton2" styleClass="btn" value="#{msg.cancel}" action="adminUserGroup" immediate="true">
						<f:setPropertyActionListener target="#{adminBean.currentLicense}" value="#{null}" />
						<f:ajax render="@form" />
					</h:commandLink>
					<h:commandLink id="saveButton2" styleClass="btn btn--success" value="#{msg.save}" action="#{adminBean.saveCurrentLicenseAction}"
						disabled="#{adminBean.currentLicense == null}">
					</h:commandLink>
				</div>
			</h:panelGroup>
		</h:form>
	</composite:implementation>
</ui:composition>

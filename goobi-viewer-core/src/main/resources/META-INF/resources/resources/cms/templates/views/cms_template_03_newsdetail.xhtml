<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:viewer="http://xmlns.jcp.org/jsf/composite/components/partner"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
	xmlns:widgetComponent="http://xmlns.jcp.org/jsf/composite/components/widgets"
	template="/resources/themes/#{navigationHelper.theme}/template.html">

	<composite:interface>
		<composite:attribute name="component" required="true"
			type="io.goobi.viewer.model.cms.pages.content.CMSComponent" />
	</composite:interface>


	<composite:implementation>

		<div id="templateNewsDetail"
			class="tpl-news-detail #{cmsPage.wrapperElementClass}">

			<!-- DATE -->
			<h:panelGroup
				rendered="#{cc.attrs.component.getContentData('A0') != ''}">
				<div class="tpl-news-detail__date">
					<h:outputText value="#{cc.attrs.component.getContentData('A0')}" />
				</div>
			</h:panelGroup>

			<!-- NEWS DETAIL CONTENT 1 -->
			<h:panelGroup rendered="#{cc.attrs.component.hasContent('A2')}">
				<div class="tpl-news-detail__content">
					<h1>#{cc.attrs.component.getContentData('A1')}</h1>

					<div class="row">
						<div class="col-12 col-sm-3">
							<!-- IMAGE -->
							<h:panelGroup
								rendered="#{cc.attrs.component.getContentData('image01') != ''}">
								<figure class="tpl-news-detail__image">
									<img
										title="#{cc.attrs.component.getContentItem('image01').content.mediaItem.name}"
										src="#{cc.attrs.component.getContentData('image01')}"
										class="img-fluid"
										alt="#{cc.attrs.component.getContentItem('image01').content.mediaItem.alternativeText}" />
									<figcaption>
										#{cc.attrs.component.getContentItem('image01').content.mediaItem.description}
									</figcaption>
								</figure>
							</h:panelGroup>
						</div>
						<div class="col-12 col-sm-9">
							<!-- TEXT -->
							<div class="tpl-news-detail__text">
								<h:outputText escape="false"
									value="#{cc.attrs.component.getContentData('A2')}"></h:outputText>
							</div>
						</div>
					</div>
				</div>
			</h:panelGroup>

			<!-- NEWS DETAIL CONTENT 2 -->
			<h:panelGroup rendered="#{cc.attrs.component.hasContent('B2')}">
				<div class="tpl-news-detail__content">
					<h1>#{cc.attrs.component.getContentData('B1')}</h1>

					<div class="row">
						<div class="col-12 col-sm-3">
							<!-- IMAGE -->
							<h:panelGroup
								rendered="#{cc.attrs.component.getContentData('image02') != ''}">
								<figure class="tpl-news-detail__image">
									<img
										title="#{cc.attrs.component.getContentItem('image02').content.mediaItem.name}"
										src="#{cc.attrs.component.getContentData('image02')}"
										class="img-fluid"
										alt="#{cc.attrs.component.getContentItem('image02').content.mediaItem.alternativeText}" />
									<figcaption>#{cc.attrs.component.getContentItem('image02').content.mediaItem.description}</figcaption>
								</figure>
							</h:panelGroup>
						</div>
						<div class="col-12 col-sm-9">
							<!-- TEXT -->
							<div class="tpl-news-detail__text">
								<h:outputText escape="false"
									value="#{cc.attrs.component.getContentData('B2')}"></h:outputText>
							</div>
						</div>
					</div>
				</div>
			</h:panelGroup>

			<!-- NEWS DETAIL CONTENT 3 -->
			<h:panelGroup rendered="#{cc.attrs.component.hasContent('C2')}">
				<div class="tpl-news-detail__content">
					<h1>#{cc.attrs.component.getContentData('C1')}</h1>

					<div class="row">
						<div class="col-12 col-sm-3">
							<!-- IMAGE -->
							<h:panelGroup
								rendered="#{cc.attrs.component.getContentData('image03') != ''}">
								<figure class="tpl-news-detail__image">
									<img
										title="#{cc.attrs.component.getContentItem('image03').content.mediaItem.name}"
										src="#{cc.attrs.component.getContentData('image03')}"
										class="img-fluid"
										alt="#{cc.attrs.component.getContentItem('image03').content.mediaItem.alternativeText}" />
									<figcaption>
										#{cc.attrs.component.getContentItem('image03').content.mediaItem.description}
									</figcaption>
								</figure>
							</h:panelGroup>
						</div>
						<div class="col-12 col-sm-9">
							<!-- TEXT -->
							<div class="tpl-news-detail__text">
								<h:outputText escape="false"
									value="#{cc.attrs.component.getContentData('C2')}"></h:outputText>
							</div>
						</div>
					</div>
				</div>
			</h:panelGroup>

			<!-- NEWS DETAIL CONTENT 4 -->
			<h:panelGroup rendered="#{cc.attrs.component.hasContent('D2')}">
				<div class="tpl-news-detail__content">
					<h1>#{cc.attrs.component.getContentData('D1')}</h1>

					<div class="row">
						<div class="col-12 col-sm-3">
							<!-- IMAGE -->
							<h:panelGroup
								rendered="#{cc.attrs.component.getContentData('image04') != ''}">
								<figure class="tpl-news-detail__image">
									<img
										title="#{cc.attrs.component.getContentItem('image04').content.mediaItem.name}"
										src="#{cc.attrs.component.getContentData('image04')}"
										class="img-fluid"
										alt="#{cc.attrs.component.getContentItem('image04').content.mediaItem.alternativeText}" />
									<figcaption>
										#{cc.attrs.component.getContentItem('image04').content.mediaItem.description}
									</figcaption>
								</figure>
							</h:panelGroup>
						</div>
						<div class="col-12 col-sm-9">
							<!-- TEXT -->
							<div class="tpl-news-detail__text">
								<h:outputText escape="false"
									value="#{cc.attrs.component.getContentData('D2')}"></h:outputText>
							</div>
						</div>
					</div>
				</div>
			</h:panelGroup>

			<!-- SOLR QUERY COLLECTION -->
			<h:panelGroup rendered="#{cmsBean.hasSearchResults()}">
				<div class="solr-query-collection">
					<div class="solr-query-collection__thumbs">
						<div class="row">
							<ui:repeat var="hit" value="#{cmsBean.getQueryResults()}">
								<div class="col-12 col-sm-4">
									<div class="solr-query-collection__thumb">
										<!-- IMAGE -->
										<div class="solr-query-collection__image">
											<h:outputLink
												value="#{navigationHelper.applicationUrl}#{hit.browseElement.url}">
												<img src="#{hit.browseElement.thumbnailUrl}"
													class="img-fluid" data-viewer-thumbnail="thumbnail"
													alt="#{hit.browseElement.label}" />
											</h:outputLink>
										</div>

										<!-- TITLE -->
										<div class="solr-query-collection__title">
											<h:outputLink
												value="#{navigationHelper.applicationUrl}#{hit.browseElement.url}"
												title="#{msg[hit.browseElement.label]}">
	            									#{msg[hit.browseElement.label]}
	            								</h:outputLink>
										</div>
									</div>
								</div>
							</ui:repeat>
						</div>
					</div>

					<viewerComponent:simplePaginator 
							itemCount="#{cmsBean.getQueryResultCount()}" 
							itemActive="#{cc.attrs.component.owningPage.listPage}"
							urlPrefix="#{cmsBean.getUrl(cc.attrs.component.owningPage)}" />

				</div>
			</h:panelGroup>
		</div>
	</composite:implementation>
</ui:composition>
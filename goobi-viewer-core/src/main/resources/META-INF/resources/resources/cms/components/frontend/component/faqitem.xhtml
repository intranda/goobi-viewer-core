<ui:composition
    xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	xmlns:util="http://goobi.io/util"
	xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
	xmlns:viewerForms="http://xmlns.jcp.org/jsf/composite/components/forms">

    <composite:interface>
		<composite:attribute name="component" required="true"/>
    </composite:interface>

    <composite:implementation>
		<ui:fragment rendered="#{cc.attrs.component.hasAccess(userBean.user)}">
		
		
			<!-- CONTENT ITEM WITH SELECTED OPTIONS -->
			<div class="content-component content-component__faq-item
						-width-100 #{cc.attrs.hideOnScreenSizes}
						#{cc.attrs.hideOnScreenSizes == 'hideMobile' ? '-hiddenOnMobile' : ''} 
						#{cc.attrs.hideOnScreenSizes == 'hideDesktop' ? '-hiddenOnDesktop' : ''}
						#{cc.attrs.component.isPrivate() and cc.attrs.component.hasAccess(userBean.user) ? '-isPrivate' : ''}">
		
			<div class="card" id="card-#{cc.attrs.component.order}">
				<div class="card-header" role="tab" id="heading-#{cc.attrs.component.order}">
					<h2 class="card-title">
						<a href="#collapse-#{cc.attrs.component.order}" role="button"
							class="#{cc.attrs.component.order eq 1 ? '' : 'collapsed'}"
							data-toggle="collapse"
							aria-expanded="#{cc.attrs.component.order eq 1 ? 'true' : 'false'}"
							aria-controls="collapse-#{cc.attrs.component.order}">
								#{cc.attrs.component.getContent('title').text}
						</a> 
						<a class="card-header__fragment-link"
							href="#card-#{cc.attrs.component.order}" data-copy="copyFAQanchor"
							aria-label="#{msg.aria__label_faq_direct_link}" title="#{msg.copyUrlDone}">
							<util:icon icon="link"/>
						</a>
						<script>
						$('[data-copy="copyFAQanchor"]').on('click', function(e) {
							  e.preventDefault();
							
							  var $url = $(location).attr('href');
							  var cardNo = $(this).attr('href');
							  
					    	  value = ($url + cardNo);
					    	  
					    	  var $temp = $("<textarea />");
					    	  $("body").append($temp);
					    	  $temp.val(value).select();
					    	  document.execCommand("copy");
					    	  $temp.remove();
					    	  
						});

						
						// COPY TO CLIPBOARD TOOLTIP
						$('[data-copy="copyFAQanchor"]').tooltip({trigger: "manual", placement: "top"}); 
					
					    $('[data-copy="copyFAQanchor"]').click(function () {
					    	// SHOW TOOLTIP
					    	 $(this).tooltip('show');
					    	
							// HIDE TOOLTIP AFTER A SHORT TIME PERIOD
					        setTimeout(function () {
					            $('[data-copy="copyFAQanchor"]').tooltip('hide');
					        }, 1700);
					
					    });
					    
					    
					    
					    	
// 						    $('[data-copy="copyFAQanchor"]').tooltip({
// 						      placement: 'top',
// 						      title: "Click to copy to clipboard",
// 						      trigger: 'hover'
// 						    });
						    


	
						</script>
					</h2>
				</div>
				<div role="region" id="collapse-#{cc.attrs.component.order}"
					class="card-collapse collapse #{cc.attrs.component.order eq 1 ? 'in' : ''}"
					data-parent="#cmsComponentContainer"
					aria-expanded="#{cc.attrs.component.order eq 1 ? 'true' : 'false'}"
					aria-labelledby="heading-#{cc.attrs.component.order}">
					<div class="card-body">
						<div class="tpl-faq-single__content">
							<!-- HTML -->
							<div class="tpl-news-overview__preview-text">
								<h:panelGroup rendered="#{cc.attrs.component.hasContent('text')}">
									<h:outputText escape="false" value="#{cc.attrs.component.getContent('text').text}"></h:outputText>
								</h:panelGroup>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			</div>
			
			
		</ui:fragment>

    </composite:implementation>
</ui:composition>
